<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multi-Agent Research Pipeline</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/styles.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="demo-bg-glow">
  <header class="header">
    <div class="header-left">
      <a href="../../" class="back-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </a>
      <div class="header-brand">
        <div class="header-logo">H</div>
        <span class="header-title">Research Pipeline</span>
        <span class="header-badge">Multi-Agent</span>
      </div>
    </div>
    <div class="header-right">
      <div class="api-status" id="api-status">
        <span class="status-dot"></span>
        <span class="status-text">Checking...</span>
      </div>
      <button class="icon-btn" id="theme-toggle" title="Toggle theme">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"/>
          <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
        </svg>
      </button>
    </div>
  </header>

  <main class="main-container">
    <!-- Input Section -->
    <section class="input-section">
      <div class="input-row">
        <input 
          type="text" 
          id="topic-input" 
          class="demo-input topic-input"
          placeholder="Enter a research topic (e.g., 'Benefits of green tea')"
        >
        <button class="demo-btn demo-btn-primary start-btn" id="start-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="5 3 19 12 5 21 5 3"/>
          </svg>
          Start Research
        </button>
      </div>
      <div class="input-hint">
        Uses browser control to search Google, read pages, and synthesize findings.
      </div>
    </section>

    <!-- Sequence Diagram -->
    <section class="sequence-section">
      <!-- Agent Columns Header -->
      <div class="sequence-header">
        <div class="agent-column" data-agent="orchestrator">
          <div class="agent-head">
            <div class="agent-icon orchestrator">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/>
              </svg>
            </div>
            <div class="agent-label">Orchestrator</div>
          </div>
        </div>
        <div class="agent-column" data-agent="searcher">
          <div class="agent-head">
            <div class="agent-icon searcher">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
              </svg>
            </div>
            <div class="agent-label">Searcher</div>
          </div>
        </div>
        <div class="agent-column" data-agent="reader">
          <div class="agent-head">
            <div class="agent-icon reader">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
            </div>
            <div class="agent-label">Reader</div>
          </div>
        </div>
        <div class="agent-column" data-agent="writer">
          <div class="agent-head">
            <div class="agent-icon writer">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                <path d="M2 2l7.586 7.586"/>
              </svg>
            </div>
            <div class="agent-label">Writer</div>
          </div>
        </div>
      </div>

      <!-- Sequence Timeline -->
      <div class="sequence-body" id="sequence-body">
        <!-- Lifelines -->
        <div class="lifelines">
          <div class="lifeline" data-agent="orchestrator"></div>
          <div class="lifeline" data-agent="searcher"></div>
          <div class="lifeline" data-agent="reader"></div>
          <div class="lifeline" data-agent="writer"></div>
        </div>

        <!-- Messages will be added here dynamically -->
        <div class="messages" id="messages">
          <div class="empty-state" id="empty-state">
            <p>Enter a topic and click "Start Research" to see the agents collaborate.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Output Section -->
    <section class="output-section" id="output-section" style="display: none;">
      <div class="output-header">
        <h2 class="output-title" id="output-title">Research Results</h2>
        <div class="output-meta">
          <span id="output-sources">0 sources</span>
          <span class="meta-sep">|</span>
          <span id="output-words">0 words</span>
          <span class="meta-sep">|</span>
          <span id="output-time">0s</span>
        </div>
      </div>
      <div class="output-body" id="output-body"></div>
    </section>
  </main>

  <script type="module" src="app.js"></script>
</body>
</html>
