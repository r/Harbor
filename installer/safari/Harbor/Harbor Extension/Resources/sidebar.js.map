{
  "version": 3,
  "sources": ["../src/browser-compat.ts", "../src/sidebar.ts"],
  "sourcesContent": ["/**\n * Browser Compatibility Layer\n *\n * Provides a unified API for browser extension functionality across\n * Firefox, Chrome, and Safari.\n *\n * Firefox uses `browser.*` APIs with native Promise support.\n * Chrome uses `chrome.*` APIs (Promise-based in MV3).\n * Safari uses `browser.*` APIs similar to Firefox.\n */\n\n// Detect environment and provide unified API\ndeclare const browser: typeof chrome | undefined;\n\n/**\n * Unified browser API that works across Firefox, Chrome, and Safari.\n * Prefers `browser` namespace (Firefox/Safari) but falls back to `chrome` (Chrome).\n */\nexport const browserAPI = (typeof browser !== 'undefined' ? browser : chrome) as typeof chrome;\n\n/**\n * Get the URL for an extension resource.\n * Safari doesn't have runtime.getURL in all contexts, so we fall back to relative URLs.\n */\nexport function getExtensionURL(path: string): string {\n  // Try runtime.getURL first (works in Firefox, Chrome, and Safari background)\n  if (browserAPI.runtime?.getURL) {\n    return browserAPI.runtime.getURL(path);\n  }\n  \n  // Fallback for Safari popup/sidebar where runtime.getURL doesn't exist\n  // Use relative URL from the extension's base\n  return path;\n}\n\n/**\n * Check if running in Firefox.\n */\nexport function isFirefox(): boolean {\n  return typeof browser !== 'undefined' && navigator.userAgent.includes('Firefox');\n}\n\n/**\n * Check if running in Chrome.\n */\nexport function isChrome(): boolean {\n  return typeof browser === 'undefined' && typeof chrome !== 'undefined';\n}\n\n/**\n * Check if running in Safari.\n */\nexport function isSafari(): boolean {\n  return typeof browser !== 'undefined' && navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome');\n}\n\n/**\n * Check if the Firefox ML API (browser.trial.ml) is available.\n * Only available in Firefox 134+ with the trialML permission.\n */\nexport function hasFirefoxML(): boolean {\n  if (typeof browser === 'undefined') return false;\n  const trial = (browser as unknown as { trial?: { ml?: unknown } }).trial;\n  return !!trial && !!trial.ml;\n}\n\n/**\n * Check if the Firefox wllama API is available.\n * Only available in Firefox 142+ with the trialML permission.\n */\nexport function hasFirefoxWllama(): boolean {\n  if (typeof browser === 'undefined') return false;\n  const trial = (browser as unknown as { trial?: { ml?: { wllama?: unknown } } }).trial;\n  return !!trial?.ml?.wllama;\n}\n\n/**\n * Check if the sidebar_action API is available.\n * Only available in Firefox.\n */\nexport function hasSidebar(): boolean {\n  return typeof browser !== 'undefined' && 'sidebarAction' in browser;\n}\n\n/**\n * Check if running in a service worker context.\n * Chrome MV3 uses service workers for the background script.\n */\nexport function isServiceWorker(): boolean {\n  return typeof ServiceWorkerGlobalScope !== 'undefined' &&\n    self instanceof ServiceWorkerGlobalScope;\n}\n\n/**\n * Check if the scripting API is available.\n * Available in MV3 extensions on both Chrome and Firefox.\n */\nexport function hasScriptingAPI(): boolean {\n  return 'scripting' in browserAPI;\n}\n\n/**\n * Execute a script in a tab, compatible with both Chrome and Firefox.\n * Falls back to tabs.executeScript for older Firefox versions.\n */\nexport async function executeScriptInTab<T>(\n  tabId: number,\n  func: (...args: unknown[]) => T,\n  args: unknown[] = []\n): Promise<T | undefined> {\n  // Try chrome.scripting first (Chrome MV3, Firefox MV3 with scripting)\n  if (browserAPI.scripting?.executeScript) {\n    const results = await browserAPI.scripting.executeScript({\n      target: { tabId },\n      func: func as () => T,\n      args,\n    });\n    return results?.[0]?.result as T | undefined;\n  }\n\n  // Fallback: browser.tabs.executeScript (Firefox MV2 style)\n  if (typeof browser !== 'undefined' && browser.tabs?.executeScript) {\n    // For this fallback, we need to serialize the function\n    const code = `(${func.toString()}).apply(null, ${JSON.stringify(args)})`;\n    const results = await browser.tabs.executeScript(tabId, { code });\n    return results?.[0] as T | undefined;\n  }\n\n  throw new Error('No script execution API available');\n}\n\n/**\n * Get the current browser name for logging and debugging.\n */\nexport function getBrowserName(): 'firefox' | 'chrome' | 'safari' | 'unknown' {\n  if (isFirefox()) return 'firefox';\n  if (isSafari()) return 'safari';\n  if (isChrome()) return 'chrome';\n  return 'unknown';\n}\n\n/**\n * Log with browser context for debugging.\n */\nexport function logWithBrowser(prefix: string, ...args: unknown[]): void {\n  console.log(`[${prefix}:${getBrowserName()}]`, ...args);\n}\n\n/**\n * Check if the omnibox API is available.\n * Available in Firefox and Chrome, but may have different features.\n */\nexport function hasOmnibox(): boolean {\n  return 'omnibox' in browserAPI;\n}\n\n/**\n * Check if externally_connectable is available.\n * Only Chrome supports onMessageExternal/onConnectExternal.\n */\nexport function hasExternalMessaging(): boolean {\n  return 'onMessageExternal' in browserAPI.runtime;\n}\n\n/**\n * Check if web navigation API is available.\n */\nexport function hasWebNavigation(): boolean {\n  return 'webNavigation' in browserAPI;\n}\n\n/**\n * Check if this is MV3 (Manifest Version 3).\n */\nexport function isManifestV3(): boolean {\n  return browserAPI.runtime.getManifest().manifest_version === 3;\n}\n\n/**\n * Service worker lifecycle handlers for Chrome MV3.\n * These help maintain state across service worker restarts.\n */\nexport const serviceWorkerLifecycle = {\n  /**\n   * Register a startup handler that runs when the service worker starts.\n   * This is useful for restoring state in Chrome MV3.\n   */\n  onStartup(handler: () => void): void {\n    if (browserAPI.runtime.onStartup) {\n      browserAPI.runtime.onStartup.addListener(handler);\n    }\n  },\n\n  /**\n   * Register an install/update handler.\n   * Runs on first install or extension update.\n   */\n  onInstalled(handler: (details: { reason: string; previousVersion?: string }) => void): void {\n    if (browserAPI.runtime.onInstalled) {\n      browserAPI.runtime.onInstalled.addListener(handler);\n    }\n  },\n\n  /**\n   * Register a suspend handler (Chrome MV3 only).\n   * Called when the service worker is about to be terminated.\n   */\n  onSuspend(handler: () => void): void {\n    if (isServiceWorker() && 'onSuspend' in browserAPI.runtime) {\n      (browserAPI.runtime as { onSuspend: { addListener: (h: () => void) => void } }).onSuspend.addListener(handler);\n    }\n  },\n\n  /**\n   * Keep the service worker alive (Chrome MV3).\n   * Use sparingly - Chrome will still terminate after 5 minutes.\n   */\n  keepAlive(): void {\n    if (isServiceWorker()) {\n      // Accessing chrome.storage periodically can help keep the worker alive\n      // but this should be used sparingly\n      setInterval(() => {\n        browserAPI.storage.local.get(null);\n      }, 20000); // Every 20 seconds\n    }\n  }\n};\n\n/**\n * Browser feature summary for debugging.\n */\nexport function getFeatureSummary(): Record<string, boolean | string> {\n  return {\n    browser: getBrowserName(),\n    isServiceWorker: isServiceWorker(),\n    isManifestV3: isManifestV3(),\n    hasSidebar: hasSidebar(),\n    hasOmnibox: hasOmnibox(),\n    hasFirefoxML: hasFirefoxML(),\n    hasFirefoxWllama: hasFirefoxWllama(),\n    hasScriptingAPI: hasScriptingAPI(),\n    hasExternalMessaging: hasExternalMessaging(),\n    hasWebNavigation: hasWebNavigation(),\n  };\n}\n", "// Make this a module to avoid global scope conflicts\nexport {};\n\nimport { browserAPI } from './browser-compat';\n\ntype ServerStatus = {\n  id: string;\n  name: string;\n  version: string;\n  runtime?: 'wasm' | 'js' | 'remote';\n  entrypoint?: string;\n  remoteUrl?: string;\n  tools?: Array<{ name: string }>;\n  running: boolean;\n};\n\ntype BridgeStatus = {\n  ok: boolean;\n  connected: boolean;\n  lastCheck: number;\n  error: string | null;\n};\n\ntype ProviderInfo = {\n  id: string;\n  type: string;\n  name: string;\n  configured: boolean;\n  needs_api_key: boolean;\n  is_local: boolean;\n  is_default: boolean;\n  is_type_default: boolean;\n  has_api_key: boolean;\n  base_url?: string;\n  available?: boolean;\n};\n\ntype LlmConfig = {\n  version: number;\n  default_model?: string;\n  default_provider?: string;\n  providers: Record<string, {\n    id: string;\n    type: string;\n    name: string;\n    enabled: boolean;\n    has_api_key: boolean;\n    base_url?: string;\n    is_type_default: boolean;\n  }>;\n};\n\n\ntype ModelInfo = {\n  id: string;\n  provider?: string;\n  owned_by?: string;\n};\n\ntype ConfiguredModel = {\n  name: string;\n  model_id: string;\n  is_default: boolean;\n};\n\n// Header elements\nconst headerLogo = document.getElementById('header-logo') as HTMLDivElement;\n\n// Server elements\nconst serversEl = document.getElementById('servers') as HTMLDivElement;\nconst addBtn = document.getElementById('add') as HTMLButtonElement;\nconst fileInput = document.getElementById('file') as HTMLInputElement;\nconst addRemoteBtn = document.getElementById('add-remote') as HTMLButtonElement;\n\n// Remote server form elements\nconst remoteServerForm = document.getElementById('remote-server-form') as HTMLDivElement;\nconst remoteServerUrlInput = document.getElementById('remote-server-url') as HTMLInputElement;\nconst remoteServerNameInput = document.getElementById('remote-server-name') as HTMLInputElement;\nconst remoteServerTransportSelect = document.getElementById('remote-server-transport') as HTMLSelectElement;\nconst remoteServerAuthInput = document.getElementById('remote-server-auth') as HTMLInputElement;\nconst remoteServerTestBtn = document.getElementById('remote-server-test') as HTMLButtonElement;\nconst remoteServerSaveBtn = document.getElementById('remote-server-save') as HTMLButtonElement;\nconst remoteServerCancelBtn = document.getElementById('remote-server-cancel') as HTMLButtonElement;\n\n// Bridge status elements\nconst bridgeStatusIndicator = document.getElementById('bridge-status-indicator') as HTMLDivElement;\nconst bridgeStatusText = document.getElementById('bridge-status-text') as HTMLSpanElement;\n\n// LLM elements\nconst llmPanelHeader = document.getElementById('llm-panel-header') as HTMLDivElement;\nconst llmPanelToggle = document.getElementById('llm-panel-toggle') as HTMLSpanElement;\nconst llmPanelBody = document.getElementById('llm-panel-body') as HTMLDivElement;\nconst llmStatusIndicator = document.getElementById('llm-status-indicator') as HTMLDivElement;\nconst llmStatusText = document.getElementById('llm-status-text') as HTMLSpanElement;\nconst configuredModelsEl = document.getElementById('configured-models') as HTMLDivElement;\nconst availableModelsSelect = document.getElementById('available-models') as HTMLSelectElement;\nconst addModelBtn = document.getElementById('add-model-btn') as HTMLButtonElement;\nconst providersCountEl = document.getElementById('providers-count') as HTMLSpanElement;\nconst detectedProvidersEl = document.getElementById('detected-providers') as HTMLDivElement;\nconst apiKeyConfig = document.getElementById('api-key-config') as HTMLDivElement;\nconst apiKeyProviderName = document.getElementById('api-key-provider-name') as HTMLSpanElement;\nconst apiKeyInput = document.getElementById('api-key-input') as HTMLInputElement;\nconst apiKeySaveBtn = document.getElementById('api-key-save') as HTMLButtonElement;\nconst apiKeyCancelBtn = document.getElementById('api-key-cancel') as HTMLButtonElement;\nconst serversPanelHeader = document.getElementById('servers-panel-header') as HTMLDivElement;\nconst serversPanelToggle = document.getElementById('servers-panel-toggle') as HTMLSpanElement;\n\n// Track which provider is being configured\nlet configuringProviderId: string | null = null;\n\n// OAuth App Credentials elements\nconst oauthPanelHeader = document.getElementById('oauth-panel-header') as HTMLDivElement;\nconst oauthPanelToggle = document.getElementById('oauth-panel-toggle') as HTMLSpanElement;\nconst oauthPanelBody = document.getElementById('oauth-panel-body') as HTMLDivElement;\nconst oauthStatusIndicator = document.getElementById('oauth-status-indicator') as HTMLDivElement;\nconst oauthStatusText = document.getElementById('oauth-status-text') as HTMLSpanElement;\nconst oauthProvidersList = document.getElementById('oauth-providers-list') as HTMLDivElement;\nconst oauthConfigForm = document.getElementById('oauth-config-form') as HTMLDivElement;\nconst oauthConfigProviderName = document.getElementById('oauth-config-provider-name') as HTMLSpanElement;\nconst oauthClientIdInput = document.getElementById('oauth-client-id') as HTMLInputElement;\nconst oauthClientSecretInput = document.getElementById('oauth-client-secret') as HTMLInputElement;\nconst oauthConfigSaveBtn = document.getElementById('oauth-config-save') as HTMLButtonElement;\nconst oauthConfigCancelBtn = document.getElementById('oauth-config-cancel') as HTMLButtonElement;\nconst oauthHelpLink = document.getElementById('oauth-help-link') as HTMLAnchorElement;\n\n// Track which OAuth provider is being configured\nlet configuringOAuthProvider: string | null = null;\n\n// Cache available models\nlet cachedAvailableModels: ModelInfo[] = [];\n\n// Bridge status polling\nconst BRIDGE_STATUS_POLL_INTERVAL = 5000; // 5 seconds\n\n// =============================================================================\n// Theme Management\n// =============================================================================\n\ntype Theme = 'light' | 'dark' | 'system';\n\nfunction getSystemTheme(): 'light' | 'dark' {\n  return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n}\n\nfunction applyTheme(theme: Theme): void {\n  const effectiveTheme = theme === 'system' ? getSystemTheme() : theme;\n  document.documentElement.setAttribute('data-theme', effectiveTheme);\n  localStorage.setItem('harbor-theme', theme);\n  updateThemeToggle(theme);\n}\n\nfunction updateThemeToggle(theme: Theme): void {\n  const btn = document.getElementById('theme-toggle');\n  if (!btn) return;\n  \n  const icons: Record<Theme, string> = { light: '\u2600\uFE0F', dark: '\uD83C\uDF19', system: '\uD83D\uDDA5\uFE0F' };\n  btn.textContent = icons[theme];\n  btn.title = `Theme: ${theme} (click to change)`;\n}\n\nfunction initTheme(): void {\n  // Safari: Always use system theme and hide the toggle button\n  const isSafariBrowser = typeof browser !== 'undefined' && \n    navigator.userAgent.includes('Safari') && \n    !navigator.userAgent.includes('Chrome');\n  \n  if (isSafariBrowser) {\n    // Hide theme toggle button in Safari\n    const themeBtn = document.getElementById('theme-toggle');\n    if (themeBtn) themeBtn.style.display = 'none';\n    \n    // Always follow system theme\n    applyTheme('system');\n    \n    // Listen for system theme changes\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {\n      applyTheme('system');\n    });\n    return;\n  }\n  \n  const saved = localStorage.getItem('harbor-theme') as Theme | null;\n  const theme = saved || 'system';\n  applyTheme(theme);\n  \n  // Listen for system theme changes\n  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {\n    const current = localStorage.getItem('harbor-theme') as Theme | null;\n    if (current === 'system' || !current) {\n      applyTheme('system');\n    }\n  });\n}\n\nfunction cycleTheme(): void {\n  const current = localStorage.getItem('harbor-theme') as Theme | null || 'system';\n  const order: Theme[] = ['system', 'light', 'dark'];\n  const next = order[(order.indexOf(current) + 1) % order.length];\n  applyTheme(next);\n}\n\n// Initialize theme on load\ninitTheme();\n\n// =============================================================================\n// Toast notification helper\n// =============================================================================\n\nfunction showToast(message: string, type: 'info' | 'error' | 'success' = 'info', duration = 3000): void {\n  const existing = document.querySelector('.toast');\n  if (existing) existing.remove();\n\n  const toast = document.createElement('div');\n  toast.className = `toast ${type !== 'info' ? type : ''}`;\n  toast.textContent = message;\n  document.body.appendChild(toast);\n\n  setTimeout(() => toast.remove(), duration);\n}\n\n// =============================================================================\n// Header Logo - Open about:debugging or copy to clipboard\n// =============================================================================\n\nconst DEBUGGING_URL = 'about:debugging#/runtime/this-firefox';\n\nheaderLogo.addEventListener('click', async () => {\n  try {\n    // Try to open the URL in a new tab\n    // Note: Firefox extensions cannot directly open about: URLs via tabs.create\n    // So we copy to clipboard as the fallback\n    await navigator.clipboard.writeText(DEBUGGING_URL);\n    showToast('Copied debugging URL to clipboard');\n  } catch (err) {\n    console.error('[Sidebar] Failed to copy to clipboard:', err);\n    showToast('Failed to copy URL');\n  }\n});\n\nfunction updateBridgeStatusUI(connected: boolean, error?: string | null): void {\n  if (connected) {\n    bridgeStatusIndicator.className = 'status-indicator connected';\n    bridgeStatusText.className = 'status-text connected';\n    bridgeStatusText.textContent = 'Connected';\n  } else {\n    bridgeStatusIndicator.className = 'status-indicator disconnected';\n    bridgeStatusText.className = 'status-text disconnected';\n    bridgeStatusText.textContent = 'Disconnected';\n    if (error) {\n      bridgeStatusText.title = error;\n    }\n  }\n}\n\nlet lastBridgeConnected = false;\n\nasync function checkBridgeStatus(): Promise<void> {\n  try {\n    const response = await browserAPI.runtime.sendMessage({ type: 'bridge_check_health' }) as BridgeStatus;\n    // Debug: show response in title attribute\n    const debugInfo = `connected: ${response.connected}, error: ${response.error || 'none'}`;\n    bridgeStatusText.title = debugInfo;\n    console.log('[Sidebar] Bridge status:', debugInfo);\n    updateBridgeStatusUI(response.connected, response.error);\n    \n    // If bridge just connected, refresh all data immediately\n    if (response.connected && !lastBridgeConnected) {\n      console.log('[Sidebar] Bridge connected - refreshing all data...');\n      // Refresh all data in parallel\n      Promise.all([\n        loadServers().catch(e => console.error('[Sidebar] Failed to load servers:', e)),\n        loadLlmProviders().catch(e => console.error('[Sidebar] Failed to load LLM providers:', e)),\n        loadPermissions().catch(e => console.error('[Sidebar] Failed to load permissions:', e)),\n        loadSessions().catch(e => console.error('[Sidebar] Failed to load sessions:', e)),\n      ]);\n    }\n    lastBridgeConnected = response.connected;\n  } catch (err) {\n    const errorMsg = err instanceof Error ? err.message : 'Unknown error';\n    console.error('[Sidebar] Failed to check bridge status:', errorMsg);\n    // Show error in UI for debugging\n    bridgeStatusText.title = `Error: ${errorMsg}`;\n    updateBridgeStatusUI(false, errorMsg);\n    lastBridgeConnected = false;\n  }\n}\n\nfunction startBridgeStatusPolling(): void {\n  // Initial check\n  checkBridgeStatus();\n  // Periodic polling\n  setInterval(checkBridgeStatus, BRIDGE_STATUS_POLL_INTERVAL);\n}\n\nfunction toBase64(buffer: ArrayBuffer): string {\n  const bytes = new Uint8Array(buffer);\n  let binary = '';\n  bytes.forEach((byte) => {\n    binary += String.fromCharCode(byte);\n  });\n  return btoa(binary);\n}\n\nfunction renderServer(server: ServerStatus): HTMLElement {\n  const item = document.createElement('div');\n  item.className = 'server';\n\n  // Row 1: Header with name, badge, and action buttons\n  const header = document.createElement('div');\n  header.className = 'server-title';\n\n  const nameContainer = document.createElement('span');\n  nameContainer.style.display = 'flex';\n  nameContainer.style.alignItems = 'center';\n  nameContainer.style.gap = '6px';\n\n  const name = document.createElement('span');\n  name.textContent = server.name;\n  nameContainer.appendChild(name);\n\n  // Show runtime badge (JS, WASM, or Remote)\n  const runtimeBadge = document.createElement('span');\n  if (server.runtime === 'remote') {\n    runtimeBadge.className = 'badge badge-remote';\n    runtimeBadge.textContent = 'REMOTE';\n  } else {\n    runtimeBadge.className = 'badge badge-muted';\n    runtimeBadge.textContent = server.runtime === 'js' ? 'JS' : 'WASM';\n  }\n  nameContainer.appendChild(runtimeBadge);\n\n  // Action buttons container\n  const actions = document.createElement('span');\n  actions.className = 'server-actions';\n\n  if (!server.running) {\n    const startButton = document.createElement('button');\n    startButton.className = 'btn btn-secondary btn-sm';\n    startButton.textContent = 'Start';\n    startButton.addEventListener('click', async () => {\n      startButton.disabled = true;\n      const response = await browserAPI.runtime.sendMessage({\n        type: 'sidebar_validate_server',\n        serverId: server.id,\n      });\n      if (!response?.ok) {\n        console.error(response?.error || 'Failed to start server');\n      }\n      await loadServers();\n      startButton.disabled = false;\n    });\n    actions.appendChild(startButton);\n  } else {\n    const stopButton = document.createElement('button');\n    stopButton.className = 'btn btn-secondary btn-sm';\n    stopButton.textContent = 'Stop';\n    stopButton.addEventListener('click', async () => {\n      stopButton.disabled = true;\n      const response = await browserAPI.runtime.sendMessage({\n        type: 'sidebar_stop_server',\n        serverId: server.id,\n      });\n      if (!response?.ok) {\n        console.error(response?.error || 'Failed to stop server');\n      }\n      await loadServers();\n      stopButton.disabled = false;\n    });\n    actions.appendChild(stopButton);\n  }\n\n  const removeButton = document.createElement('button');\n  removeButton.className = 'btn btn-ghost btn-sm';\n  removeButton.textContent = 'Unload';\n  removeButton.addEventListener('click', async () => {\n    removeButton.disabled = true;\n    const response = await browserAPI.runtime.sendMessage({\n      type: 'sidebar_remove_server',\n      serverId: server.id,\n    });\n    if (!response?.ok) {\n      console.error(response?.error || 'Failed to remove server');\n    }\n    await loadServers();\n    removeButton.disabled = false;\n  });\n  actions.appendChild(removeButton);\n\n  header.appendChild(nameContainer);\n  header.appendChild(actions);\n\n  // Row 2: Status and tools info\n  const meta = document.createElement('div');\n  meta.className = 'server-meta';\n  \n  const statusDot = document.createElement('span');\n  statusDot.className = `status-dot ${server.running ? 'status-running' : 'status-stopped'}`;\n  meta.appendChild(statusDot);\n  \n  const statusText = document.createElement('span');\n  statusText.textContent = server.running ? 'Running' : 'Stopped';\n  statusText.style.marginRight = '12px';\n  meta.appendChild(statusText);\n  \n  // Show remote URL for remote servers\n  if (server.runtime === 'remote' && server.remoteUrl) {\n    const urlText = document.createElement('span');\n    urlText.textContent = server.remoteUrl;\n    urlText.style.color = 'var(--color-text-muted)';\n    urlText.style.fontSize = 'var(--text-xs)';\n    urlText.style.fontFamily = 'var(--font-mono)';\n    urlText.style.marginRight = '12px';\n    urlText.style.wordBreak = 'break-all';\n    meta.appendChild(urlText);\n  }\n\n  const toolNames = (server.tools || []).map((tool) => tool.name).join(', ');\n  if (toolNames.length > 0) {\n    const toolsText = document.createElement('span');\n    toolsText.textContent = `Tools: ${toolNames}`;\n    toolsText.style.color = 'var(--color-text-muted)';\n    meta.appendChild(toolsText);\n  }\n\n  item.appendChild(header);\n  item.appendChild(meta);\n  return item;\n}\n\nlet isLoadingServers = false;\nasync function loadServers(): Promise<void> {\n  if (isLoadingServers) {\n    console.log('[Sidebar] Already loading servers, skipping...');\n    return;\n  }\n  isLoadingServers = true;\n  \n  try {\n    serversEl.innerHTML = '';\n    const response = await browserAPI.runtime.sendMessage({ type: 'sidebar_get_servers' });\n    if (!response?.ok) {\n      serversEl.textContent = response?.error || 'Failed to load servers';\n      return;\n    }\n    const servers = response.servers as ServerStatus[];\n    if (!servers || servers.length === 0) {\n      serversEl.textContent = 'No servers installed.';\n      return;\n    }\n    // Deduplicate by ID just in case\n    const seen = new Set<string>();\n    const uniqueServers = servers.filter(s => {\n      if (seen.has(s.id)) return false;\n      seen.add(s.id);\n      return true;\n    });\n    uniqueServers.forEach((server) => serversEl.appendChild(renderServer(server)));\n  } finally {\n    isLoadingServers = false;\n  }\n}\n\n// Theme toggle\nconst themeToggle = document.getElementById('theme-toggle');\nthemeToggle?.addEventListener('click', cycleTheme);\n\naddBtn.addEventListener('click', () => {\n  fileInput.click();\n});\n\nfileInput.addEventListener('change', async () => {\n  const file = fileInput.files?.[0];\n  if (!file) {\n    return;\n  }\n\n  let manifest: Record<string, unknown>;\n\n  if (file.name.endsWith('.json')) {\n    // Handle JSON manifest file\n    try {\n      const text = await file.text();\n      const parsed = JSON.parse(text);\n      \n      // Validate required fields\n      if (!parsed.id && !parsed.name) {\n        showToast('Invalid manifest: missing id or name');\n        fileInput.value = '';\n        return;\n      }\n      \n      manifest = {\n        ...parsed,\n        // Generate id if not provided\n        id: parsed.id || `mcp-${Date.now()}`,\n        // Default runtime to 'js' if scriptBase64 or scriptUrl present\n        runtime: parsed.runtime || (parsed.scriptBase64 || parsed.scriptUrl ? 'js' : 'wasm'),\n        permissions: parsed.permissions || [],\n      };\n      \n      showToast(`Loading ${manifest.runtime === 'js' ? 'JS' : 'WASM'} server: ${manifest.name || manifest.id}`);\n    } catch (e) {\n      console.error('Failed to parse manifest:', e);\n      showToast('Failed to parse JSON manifest');\n      fileInput.value = '';\n      return;\n    }\n  } else {\n    // Handle WASM file (existing behavior)\n    const bytes = await file.arrayBuffer();\n    manifest = {\n      id: `wasm-${Date.now()}`,\n      name: file.name.replace(/\\.wasm$/i, ''),\n      version: '0.1.0',\n      runtime: 'wasm',\n      entrypoint: file.name,\n      moduleBytesBase64: toBase64(bytes),\n      permissions: [],\n      tools: [],\n    };\n    showToast(`Loading WASM server: ${manifest.name}`);\n  }\n\n  const response = await browserAPI.runtime.sendMessage({\n    type: 'sidebar_install_server',\n    manifest,\n  });\n  if (!response?.ok) {\n    console.error(response?.error || 'Failed to install server');\n    showToast('Failed to install server');\n  }\n  fileInput.value = '';\n  const validate = await browserAPI.runtime.sendMessage({\n    type: 'sidebar_validate_server',\n    serverId: manifest.id,\n  });\n  if (!validate?.ok) {\n    console.error(validate?.error || 'Failed to validate server');\n    showToast('Failed to start server: ' + (validate?.error || 'unknown error'));\n  } else {\n    showToast('Server installed and started');\n  }\n  await loadServers();\n});\n\nloadServers().catch((error) => {\n  console.error('Failed to load servers', error);\n});\n\n// =============================================================================\n// Remote Server Form Handlers\n// =============================================================================\n\nfunction showRemoteServerForm(): void {\n  remoteServerForm.style.display = 'block';\n  remoteServerUrlInput.value = '';\n  remoteServerNameInput.value = '';\n  remoteServerTransportSelect.value = 'sse';\n  remoteServerAuthInput.value = '';\n  remoteServerUrlInput.focus();\n}\n\nfunction hideRemoteServerForm(): void {\n  remoteServerForm.style.display = 'none';\n  remoteServerUrlInput.value = '';\n  remoteServerNameInput.value = '';\n  remoteServerAuthInput.value = '';\n}\n\naddRemoteBtn?.addEventListener('click', showRemoteServerForm);\nremoteServerCancelBtn?.addEventListener('click', hideRemoteServerForm);\n\n// Test connection to remote server\nremoteServerTestBtn?.addEventListener('click', async () => {\n  const url = remoteServerUrlInput.value.trim();\n  if (!url) {\n    showToast('Please enter a server URL', 'error');\n    return;\n  }\n\n  remoteServerTestBtn.disabled = true;\n  remoteServerTestBtn.textContent = 'Testing...';\n\n  try {\n    const response = await browserAPI.runtime.sendMessage({\n      type: 'sidebar_test_remote_server',\n      url,\n      transport: remoteServerTransportSelect.value,\n      authHeader: remoteServerAuthInput.value.trim() || undefined,\n    });\n\n    if (response?.ok) {\n      showToast(`Connection successful! Found ${response.toolCount || 0} tools.`, 'success');\n      // Auto-fill name if not set and server returned one\n      if (!remoteServerNameInput.value && response.serverName) {\n        remoteServerNameInput.value = response.serverName;\n      }\n    } else {\n      showToast(`Connection failed: ${response?.error || 'Unknown error'}`, 'error');\n    }\n  } catch (err) {\n    showToast(`Test failed: ${err instanceof Error ? err.message : String(err)}`, 'error');\n  }\n\n  remoteServerTestBtn.disabled = false;\n  remoteServerTestBtn.textContent = 'Test Connection';\n});\n\n// Save remote server\nremoteServerSaveBtn?.addEventListener('click', async () => {\n  const url = remoteServerUrlInput.value.trim();\n  const name = remoteServerNameInput.value.trim();\n  const transport = remoteServerTransportSelect.value as 'sse' | 'websocket';\n  const authHeader = remoteServerAuthInput.value.trim() || undefined;\n\n  if (!url) {\n    showToast('Please enter a server URL', 'error');\n    return;\n  }\n\n  if (!name) {\n    showToast('Please enter a server name', 'error');\n    return;\n  }\n\n  remoteServerSaveBtn.disabled = true;\n  remoteServerSaveBtn.textContent = 'Adding...';\n\n  try {\n    const response = await browserAPI.runtime.sendMessage({\n      type: 'sidebar_add_remote_server',\n      url,\n      name,\n      transport,\n      authHeader,\n    });\n\n    if (response?.ok) {\n      showToast(`Added remote server: ${name}`, 'success');\n      hideRemoteServerForm();\n      await loadServers();\n    } else {\n      showToast(`Failed to add server: ${response?.error || 'Unknown error'}`, 'error');\n    }\n  } catch (err) {\n    showToast(`Failed: ${err instanceof Error ? err.message : String(err)}`, 'error');\n  }\n\n  remoteServerSaveBtn.disabled = false;\n  remoteServerSaveBtn.textContent = 'Add Server';\n});\n\n// Auto-refresh servers when storage changes (e.g., from Directory page)\nbrowserAPI.storage.onChanged.addListener((changes, area) => {\n  if (area === 'local' && changes.harbor_mcp_servers) {\n    console.log('[Sidebar] Server storage changed, refreshing...');\n    loadServers();\n  }\n});\n\n// Start bridge status polling\nstartBridgeStatusPolling();\n\n// =============================================================================\n// Panel Toggle Logic\n// =============================================================================\n\nfunction setupPanelToggle(header: HTMLElement, toggle: HTMLElement, body: HTMLElement): void {\n  header.addEventListener('click', () => {\n    const isCollapsed = body.classList.toggle('collapsed');\n    toggle.classList.toggle('collapsed', isCollapsed);\n  });\n}\n\nsetupPanelToggle(llmPanelHeader, llmPanelToggle, llmPanelBody);\nsetupPanelToggle(serversPanelHeader, serversPanelToggle, serversEl);\n\n// =============================================================================\n// LLM Provider Management\n// =============================================================================\n\nfunction updateLlmHeaderStatus(availableCount: number): void {\n  if (availableCount > 0) {\n    llmStatusIndicator.className = 'status-indicator connected';\n    llmStatusText.className = 'status-text connected';\n    llmStatusText.textContent = `${availableCount} available`;\n  } else {\n    llmStatusIndicator.className = 'status-indicator disconnected';\n    llmStatusText.className = 'status-text disconnected';\n    llmStatusText.textContent = 'None available';\n  }\n}\n\n\nfunction capitalizeFirst(str: string): string {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n// Show API key configuration for a cloud provider\nfunction showApiKeyConfig(providerType: string): void {\n  configuringProviderId = providerType;\n  apiKeyProviderName.textContent = `Configure ${capitalizeFirst(providerType)}`;\n  apiKeyInput.value = '';\n  apiKeyConfig.style.display = 'block';\n  apiKeyInput.focus();\n}\n\n// Hide API key configuration\nfunction hideApiKeyConfig(): void {\n  configuringProviderId = null;\n  apiKeyConfig.style.display = 'none';\n  apiKeyInput.value = '';\n}\n\n// API Key save button\napiKeySaveBtn.addEventListener('click', async () => {\n  if (!configuringProviderId || !apiKeyInput.value.trim()) return;\n\n  apiKeySaveBtn.disabled = true;\n  apiKeySaveBtn.textContent = 'Saving...';\n\n  try {\n    const response = await browserAPI.runtime.sendMessage({\n      type: 'llm_configure_provider',\n      provider: configuringProviderId,\n      name: capitalizeFirst(configuringProviderId),\n      api_key: apiKeyInput.value.trim(),\n      enabled: true,\n    }) as { ok: boolean; id?: string; error?: string };\n    \n    if (response.ok) {\n      showToast('API key saved');\n      hideApiKeyConfig();\n      await loadLlmProviders();\n    } else {\n      showToast('Failed to save: ' + (response.error || 'Unknown error'));\n    }\n  } catch (err) {\n    showToast('Failed to save API key');\n    console.error('Failed to save:', err);\n  }\n\n  apiKeySaveBtn.disabled = false;\n  apiKeySaveBtn.textContent = 'Save';\n});\n\n// API Key cancel button\napiKeyCancelBtn.addEventListener('click', () => {\n  hideApiKeyConfig();\n});\n\nasync function loadLlmProviders(): Promise<void> {\n  try {\n    // Load configured models, available models, and providers in parallel\n    const [configuredModelsRes, modelsRes, providersRes] = await Promise.all([\n      browserAPI.runtime.sendMessage({ type: 'llm_list_configured_models' }) as Promise<{\n        ok: boolean;\n        models?: ConfiguredModel[];\n        error?: string;\n      }>,\n      browserAPI.runtime.sendMessage({ type: 'llm_list_models' }) as Promise<{\n        ok: boolean;\n        models?: ModelInfo[];\n        error?: string;\n      }>,\n      browserAPI.runtime.sendMessage({ type: 'llm_list_providers' }) as Promise<{\n        ok: boolean;\n        providers?: ProviderInfo[];\n        error?: string;\n      }>,\n    ]);\n\n    // Handle configured models\n    const configuredModels = configuredModelsRes.ok ? (configuredModelsRes.models || []) : [];\n    renderConfiguredModels(configuredModels);\n\n    // Handle available models for dropdown\n    const availableModels = modelsRes.ok ? (modelsRes.models || []) : [];\n    cachedAvailableModels = availableModels;\n    renderAvailableModelsDropdown(availableModels, configuredModels);\n\n    // Handle providers\n    const providers = providersRes.ok ? (providersRes.providers || []) : [];\n    const availableCount = providers.filter(p => p.available || (p.is_local && p.configured)).length;\n    \n    providersCountEl.textContent = String(availableCount);\n    renderProviders(providers);\n\n    // Update header status based on configured models\n    if (configuredModels.length > 0) {\n      llmStatusIndicator.className = 'status-indicator connected';\n      llmStatusText.className = 'status-text connected';\n      llmStatusText.textContent = `${configuredModels.length} model${configuredModels.length > 1 ? 's' : ''}`;\n    } else if (availableModels.length > 0) {\n      llmStatusIndicator.className = 'status-indicator connecting';\n      llmStatusText.className = 'status-text connecting';\n      llmStatusText.textContent = 'No models configured';\n    } else {\n      llmStatusIndicator.className = 'status-indicator disconnected';\n      llmStatusText.className = 'status-text disconnected';\n      llmStatusText.textContent = 'No models';\n    }\n    \n  } catch (err) {\n    console.error('[Sidebar] Failed to load LLM data:', err);\n    llmStatusIndicator.className = 'status-indicator disconnected';\n    llmStatusText.className = 'status-text disconnected';\n    llmStatusText.textContent = 'Offline';\n    configuredModelsEl.innerHTML = '<div class=\"no-models\">Bridge not connected</div>';\n  }\n}\n\n// Render configured models list\nfunction renderConfiguredModels(models: ConfiguredModel[]): void {\n  configuredModelsEl.innerHTML = '';\n  \n  if (models.length === 0) {\n    configuredModelsEl.innerHTML = '<div class=\"no-models\">No models configured. Add one below.</div>';\n    return;\n  }\n  \n  for (const model of models) {\n    const el = document.createElement('div');\n    el.className = `configured-model ${model.is_default ? 'is-default' : ''}`;\n    \n    el.innerHTML = `\n      <div class=\"configured-model-info\">\n        <div class=\"configured-model-name\">\n          ${model.name}\n          ${model.is_default ? '<span class=\"badge badge-success\">Default</span>' : ''}\n        </div>\n        <div class=\"configured-model-id\">${model.model_id}</div>\n      </div>\n      <div class=\"configured-model-actions\">\n        <button class=\"btn btn-ghost btn-sm test-model-btn\" data-model=\"${model.model_id}\" title=\"Test connection\">\u26A1</button>\n        ${!model.is_default ? `<button class=\"btn btn-ghost btn-sm set-default-model-btn\" data-name=\"${model.name}\" title=\"Set as default\">\u2605</button>` : ''}\n        <button class=\"btn btn-ghost btn-sm remove-model-btn\" data-name=\"${model.name}\" title=\"Remove\">\u2715</button>\n      </div>\n    `;\n    \n    configuredModelsEl.appendChild(el);\n  }\n  \n  // Event listeners\n  configuredModelsEl.querySelectorAll('.test-model-btn').forEach(btn => {\n    btn.addEventListener('click', async () => {\n      const modelId = (btn as HTMLElement).dataset.model;\n      if (!modelId) return;\n      \n      const originalText = btn.textContent;\n      btn.textContent = '...';\n      (btn as HTMLButtonElement).disabled = true;\n      \n      try {\n        const result = await browserAPI.runtime.sendMessage({ \n          type: 'llm_test_model', \n          model: modelId \n        }) as { ok: boolean; response?: string; error?: string };\n        \n        if (result.ok) {\n          showToast(`\u2713 Model works! Response: \"${result.response?.slice(0, 50)}...\"`, 'success');\n        } else {\n          showToast(`\u2717 Test failed: ${result.error}`, 'error');\n        }\n      } catch (err) {\n        showToast(`\u2717 Test failed: ${err instanceof Error ? err.message : String(err)}`, 'error');\n      } finally {\n        btn.textContent = originalText;\n        (btn as HTMLButtonElement).disabled = false;\n      }\n    });\n  });\n  \n  configuredModelsEl.querySelectorAll('.set-default-model-btn').forEach(btn => {\n    btn.addEventListener('click', async () => {\n      const name = (btn as HTMLElement).dataset.name;\n      if (!name) return;\n      await browserAPI.runtime.sendMessage({ type: 'llm_set_configured_model_default', name });\n      await loadLlmProviders();\n    });\n  });\n  \n  configuredModelsEl.querySelectorAll('.remove-model-btn').forEach(btn => {\n    btn.addEventListener('click', async () => {\n      const name = (btn as HTMLElement).dataset.name;\n      if (!name) return;\n      await browserAPI.runtime.sendMessage({ type: 'llm_remove_configured_model', name });\n      await loadLlmProviders();\n      showToast(`Removed \"${name}\"`);\n    });\n  });\n}\n\n// Render available models dropdown\nfunction renderAvailableModelsDropdown(models: ModelInfo[], configured: ConfiguredModel[]): void {\n  const configuredIds = new Set(configured.map(c => c.model_id));\n  \n  availableModelsSelect.innerHTML = '<option value=\"\">Select a model to add...</option>';\n  \n  // Filter out already configured models\n  const available = models.filter(m => !configuredIds.has(m.id));\n  \n  if (available.length === 0) {\n    availableModelsSelect.innerHTML = '<option value=\"\">No more models available</option>';\n    addModelBtn.disabled = true;\n    return;\n  }\n  \n  for (const model of available) {\n    const option = document.createElement('option');\n    option.value = model.id;\n    option.textContent = model.id;\n    availableModelsSelect.appendChild(option);\n  }\n}\n\n// Render providers list\nfunction renderProviders(providers: ProviderInfo[]): void {\n  detectedProvidersEl.innerHTML = '';\n  \n  const localProviders = providers.filter(p => p.is_local);\n  const cloudProviders = providers.filter(p => !p.is_local);\n  \n  for (const provider of [...localProviders, ...cloudProviders]) {\n    const isAvailable = provider.available || (provider.is_local && provider.configured);\n    const needsConfig = !provider.is_local && !provider.has_api_key;\n    \n    const el = document.createElement('div');\n    el.className = `detected-provider ${isAvailable ? 'available' : needsConfig ? 'needs-config' : 'unavailable'}`;\n    \n    let statusText = '';\n    let statusClass = '';\n    if (isAvailable) {\n      statusText = '\u25CF Running';\n      statusClass = 'available';\n    } else if (provider.is_local) {\n      statusText = '\u25CB Not detected';\n      statusClass = 'unavailable';\n    } else if (needsConfig) {\n      statusText = '\u25CB Needs API key';\n      statusClass = 'needs-config';\n    } else {\n      statusText = '\u25CF Ready';\n      statusClass = 'available';\n    }\n    \n    let actionHtml = '';\n    if (needsConfig) {\n      actionHtml = `<button class=\"btn btn-secondary btn-sm configure-provider-btn\" data-provider=\"${provider.type}\">Configure</button>`;\n    }\n    \n    el.innerHTML = `\n      <div class=\"detected-provider-info\">\n        <div class=\"detected-provider-name\">${provider.name}</div>\n        <div class=\"detected-provider-status ${statusClass}\">${statusText}</div>\n      </div>\n      <div class=\"detected-provider-action\">${actionHtml}</div>\n    `;\n    \n    detectedProvidersEl.appendChild(el);\n  }\n  \n  // Event listeners for configure buttons\n  detectedProvidersEl.querySelectorAll('.configure-provider-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      const providerType = (btn as HTMLElement).dataset.provider;\n      if (providerType) showApiKeyConfig(providerType);\n    });\n  });\n}\n\n// Available models dropdown change handler\navailableModelsSelect.addEventListener('change', () => {\n  addModelBtn.disabled = !availableModelsSelect.value;\n});\n\n// Add model button\naddModelBtn.addEventListener('click', async () => {\n  const modelId = availableModelsSelect.value;\n  if (!modelId) return;\n  \n  addModelBtn.disabled = true;\n  try {\n    const response = await browserAPI.runtime.sendMessage({\n      type: 'llm_add_configured_model',\n      model_id: modelId,\n    }) as { ok: boolean; name?: string; error?: string };\n    \n    if (response.ok) {\n      showToast(`Added \"${response.name}\"`);\n      await loadLlmProviders();\n    } else {\n      showToast('Failed to add model');\n    }\n  } catch (err) {\n    showToast('Failed to add model');\n  }\n  addModelBtn.disabled = false;\n});\n\n// Load LLM providers on startup\nloadLlmProviders().catch((error) => {\n  console.error('Failed to load LLM providers', error);\n});\n\n// =============================================================================\n// Permissions Panel\n// =============================================================================\n\nconst permissionsPanelHeader = document.getElementById('permissions-panel-header') as HTMLDivElement;\nconst permissionsPanelToggle = document.getElementById('permissions-panel-toggle') as HTMLSpanElement;\nconst permissionsList = document.getElementById('permissions-list') as HTMLDivElement;\nconst refreshPermissionsBtn = document.getElementById('refresh-permissions-btn') as HTMLButtonElement;\n\ntype PermissionStatusEntry = {\n  origin: string;\n  scopes: Record<string, string>;\n  allowedTools?: string[];\n  source?: 'harbor' | 'web-agents-api';\n};\n\nasync function loadPermissions(): Promise<void> {\n  try {\n    const response = await browserAPI.runtime.sendMessage({ type: 'list_all_permissions' }) as {\n      type: string;\n      permissions?: PermissionStatusEntry[];\n    };\n\n    if (response?.permissions) {\n      renderPermissions(response.permissions);\n    }\n  } catch (err) {\n    console.error('[Sidebar] Failed to load permissions:', err);\n    permissionsList.innerHTML = '<div class=\"empty-state\">Failed to load permissions.</div>';\n  }\n}\n\nfunction escapeHtml(text: string): string {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\nfunction renderPermissions(permissions: PermissionStatusEntry[]): void {\n  if (permissions.length === 0) {\n    permissionsList.innerHTML = '<div class=\"empty-state\">No site permissions granted yet.</div>';\n    return;\n  }\n\n  permissionsList.innerHTML = permissions.map((perm) => {\n    const grantedScopes = Object.entries(perm.scopes)\n      .filter(([, status]) => status === 'granted-always' || status === 'granted-once')\n      .map(([scope, status]) => ({ scope, status }));\n\n    const deniedScopes = Object.entries(perm.scopes)\n      .filter(([, status]) => status === 'denied')\n      .map(([scope]) => scope);\n\n    const scopeBadges = [\n      ...grantedScopes.map(({ scope, status }) => {\n        const label = scope.split(':')[1] || scope;\n        const isOnce = status === 'granted-once';\n        const badgeClass = isOnce ? 'permission-scope-badge temporary' : 'permission-scope-badge';\n        const suffix = isOnce ? ' <span class=\"permission-temp-label\">\u23F1</span>' : '';\n        return `<span class=\"${badgeClass}\">${escapeHtml(label)}${suffix}</span>`;\n      }),\n      ...deniedScopes.map((scope) => {\n        const label = scope.split(':')[1] || scope;\n        return `<span class=\"permission-scope-badge denied\">${escapeHtml(label)} \u2715</span>`;\n      }),\n    ].join('');\n\n    let toolsHtml = '';\n    if (perm.allowedTools && perm.allowedTools.length > 0) {\n      const toolBadges = perm.allowedTools.map((tool) => {\n        const toolName = tool.split('/')[1] || tool;\n        return `<span class=\"permission-tool-badge\">${escapeHtml(toolName)}</span>`;\n      }).join('');\n\n      toolsHtml = `\n        <div class=\"permission-tools-section\">\n          <div class=\"permission-tools-title\">Allowed Tools</div>\n          <div class=\"permission-tools-list\">${toolBadges}</div>\n        </div>\n      `;\n    }\n\n    const sourceLabel = perm.source === 'web-agents-api' ? 'Web Agents API' : 'Harbor';\n    const sourceBadge = `<span class=\"permission-source-badge ${perm.source || 'harbor'}\">${escapeHtml(sourceLabel)}</span>`;\n\n    return `\n      <div class=\"permission-origin-item\" data-origin=\"${escapeHtml(perm.origin)}\">\n        <div class=\"permission-origin-header\">\n          <span class=\"permission-origin-name\">${escapeHtml(perm.origin)}</span>\n          ${sourceBadge}\n        </div>\n        <div class=\"permission-scopes\">\n          ${scopeBadges || '<span style=\"color: var(--color-text-muted); font-size: 11px;\">No scopes</span>'}\n        </div>\n        ${toolsHtml}\n        <div class=\"permission-actions\">\n          <button class=\"btn btn-sm btn-danger revoke-permissions-btn\" data-origin=\"${escapeHtml(perm.origin)}\" data-source=\"${escapeHtml(perm.source || 'harbor')}\">Revoke All</button>\n        </div>\n      </div>\n    `;\n  }).join('');\n\n  // Add event listeners for revoke buttons\n  permissionsList.querySelectorAll('.revoke-permissions-btn').forEach((btn) => {\n    btn.addEventListener('click', async () => {\n      const origin = (btn as HTMLElement).dataset.origin!;\n      const source = (btn as HTMLElement).dataset.source;\n      if (!confirm(`Revoke all permissions for ${origin}?`)) return;\n\n      try {\n        await browserAPI.runtime.sendMessage({ type: 'revoke_origin_permissions', origin, source });\n        await loadPermissions();\n        showToast('Permissions revoked');\n      } catch (err) {\n        console.error('[Sidebar] Failed to revoke permissions:', err);\n        showToast('Failed to revoke permissions', 'error');\n      }\n    });\n  });\n}\n\n// Setup permissions panel toggle\nsetupPanelToggle(permissionsPanelHeader, permissionsPanelToggle, permissionsList);\n\n// Refresh permissions button\nrefreshPermissionsBtn?.addEventListener('click', async (e) => {\n  e.stopPropagation();\n  refreshPermissionsBtn.disabled = true;\n  await loadPermissions();\n  refreshPermissionsBtn.disabled = false;\n});\n\n// Listen for permission changes from background\nbrowserAPI.runtime.onMessage.addListener((message) => {\n  if (message?.type === 'permissions_changed') {\n    loadPermissions();\n  }\n  return false;\n});\n\n// Load permissions on startup\nloadPermissions();\n\n// =============================================================================\n// OAuth App Credentials Panel\n// =============================================================================\n\nconst oauthProviderConfigs: Array<{ id: string; name: string; icon: string; helpUrl: string }> = [\n  {\n    id: 'google',\n    name: 'Google',\n    icon: '\uD83D\uDD35',\n    helpUrl: 'https://console.cloud.google.com/apis/credentials',\n  },\n  {\n    id: 'github',\n    name: 'GitHub',\n    icon: '\u26AB',\n    helpUrl: 'https://github.com/settings/developers',\n  },\n];\n\nasync function loadOAuthCredentialsStatus(): Promise<void> {\n  try {\n    const response = await browserAPI.runtime.sendMessage({ type: 'oauth_get_credentials_status' }) as {\n      ok: boolean;\n      providers?: Record<string, { configured: boolean; client_id_preview?: string }>;\n      error?: string;\n    };\n\n    if (response?.ok && response.providers) {\n      renderOAuthProviders(response.providers);\n      \n      // Update header status\n      const configuredCount = Object.values(response.providers).filter(p => p.configured).length;\n      if (configuredCount > 0) {\n        oauthStatusIndicator.className = 'status-indicator connected';\n        oauthStatusText.className = 'status-text connected';\n        oauthStatusText.textContent = `${configuredCount} configured`;\n      } else {\n        oauthStatusIndicator.className = 'status-indicator disconnected';\n        oauthStatusText.className = 'status-text disconnected';\n        oauthStatusText.textContent = 'Not configured';\n      }\n    } else {\n      // Bridge not connected or error - show a simple message, don't block\n      oauthProvidersList.innerHTML = '<div class=\"no-providers\">Waiting for bridge...</div>';\n      oauthStatusIndicator.className = 'status-indicator connecting';\n      oauthStatusText.className = 'status-text connecting';\n      oauthStatusText.textContent = 'Loading...';\n    }\n  } catch (err) {\n    console.error('[Sidebar] Failed to load OAuth credentials status:', err);\n    oauthProvidersList.innerHTML = '<div class=\"no-providers\">Failed to load</div>';\n    oauthStatusIndicator.className = 'status-indicator disconnected';\n    oauthStatusText.className = 'status-text disconnected';\n    oauthStatusText.textContent = 'Error';\n  }\n}\n\nfunction renderOAuthProviders(providers: Record<string, { configured: boolean; client_id_preview?: string }>): void {\n  oauthProvidersList.innerHTML = '';\n  \n  for (const config of oauthProviderConfigs) {\n    const status = providers[config.id];\n    const isConfigured = status?.configured ?? false;\n    \n    const el = document.createElement('div');\n    el.className = `detected-provider ${isConfigured ? 'available' : 'needs-config'}`;\n    \n    const statusText = isConfigured \n      ? `\u2713 Configured${status?.client_id_preview ? ` (${status.client_id_preview})` : ''}`\n      : '\u25CB Not configured';\n    const statusClass = isConfigured ? 'available' : 'needs-config';\n    \n    const actionHtml = isConfigured\n      ? `<button class=\"btn btn-ghost btn-sm oauth-remove-btn\" data-provider=\"${config.id}\" title=\"Remove credentials\">\u2715</button>`\n      : `<button class=\"btn btn-secondary btn-sm oauth-configure-btn\" data-provider=\"${config.id}\">Configure</button>`;\n    \n    el.innerHTML = `\n      <div class=\"detected-provider-info\">\n        <div class=\"detected-provider-name\">${config.icon} ${config.name}</div>\n        <div class=\"detected-provider-status ${statusClass}\">${statusText}</div>\n      </div>\n      <div class=\"detected-provider-action\">${actionHtml}</div>\n    `;\n    \n    oauthProvidersList.appendChild(el);\n  }\n  \n  // Event listeners for configure buttons\n  oauthProvidersList.querySelectorAll('.oauth-configure-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      const provider = (btn as HTMLElement).dataset.provider;\n      if (provider) showOAuthConfigForm(provider);\n    });\n  });\n  \n  // Event listeners for remove buttons\n  oauthProvidersList.querySelectorAll('.oauth-remove-btn').forEach(btn => {\n    btn.addEventListener('click', async () => {\n      const provider = (btn as HTMLElement).dataset.provider;\n      if (!provider) return;\n      if (!confirm(`Remove ${provider} OAuth credentials?`)) return;\n      \n      (btn as HTMLButtonElement).disabled = true;\n      try {\n        const response = await browserAPI.runtime.sendMessage({\n          type: 'oauth_remove_credentials',\n          provider,\n        }) as { ok: boolean; error?: string };\n        \n        if (response.ok) {\n          showToast(`Removed ${provider} credentials`);\n          await loadOAuthCredentialsStatus();\n        } else {\n          showToast(`Failed: ${response.error}`, 'error');\n        }\n      } catch (err) {\n        showToast('Failed to remove credentials', 'error');\n      }\n      (btn as HTMLButtonElement).disabled = false;\n    });\n  });\n}\n\nfunction showOAuthConfigForm(provider: string): void {\n  configuringOAuthProvider = provider;\n  const config = oauthProviderConfigs.find(p => p.id === provider);\n  const displayName = config?.name ?? provider;\n  \n  oauthConfigProviderName.textContent = `Configure ${displayName}`;\n  oauthHelpLink.href = config?.helpUrl ?? '#';\n  oauthClientIdInput.value = '';\n  oauthClientSecretInput.value = '';\n  oauthConfigForm.style.display = 'block';\n  oauthClientIdInput.focus();\n}\n\nfunction hideOAuthConfigForm(): void {\n  configuringOAuthProvider = null;\n  oauthConfigForm.style.display = 'none';\n  oauthClientIdInput.value = '';\n  oauthClientSecretInput.value = '';\n}\n\n// OAuth config save button\noauthConfigSaveBtn?.addEventListener('click', async () => {\n  if (!configuringOAuthProvider) return;\n  \n  const clientId = oauthClientIdInput.value.trim();\n  const clientSecret = oauthClientSecretInput.value.trim();\n  \n  if (!clientId || !clientSecret) {\n    showToast('Please enter both Client ID and Client Secret', 'error');\n    return;\n  }\n  \n  oauthConfigSaveBtn.disabled = true;\n  oauthConfigSaveBtn.textContent = 'Saving...';\n  \n  try {\n    const response = await browserAPI.runtime.sendMessage({\n      type: 'oauth_set_credentials',\n      provider: configuringOAuthProvider,\n      client_id: clientId,\n      client_secret: clientSecret,\n    }) as { ok: boolean; error?: string };\n    \n    if (response.ok) {\n      showToast(`${configuringOAuthProvider} credentials saved!`, 'success');\n      hideOAuthConfigForm();\n      await loadOAuthCredentialsStatus();\n    } else {\n      showToast(`Failed: ${response.error}`, 'error');\n    }\n  } catch (err) {\n    showToast('Failed to save credentials', 'error');\n    console.error('Failed to save OAuth credentials:', err);\n  }\n  \n  oauthConfigSaveBtn.disabled = false;\n  oauthConfigSaveBtn.textContent = 'Save';\n});\n\n// OAuth config cancel button\noauthConfigCancelBtn?.addEventListener('click', hideOAuthConfigForm);\n\n// Setup OAuth panel toggle\nsetupPanelToggle(oauthPanelHeader, oauthPanelToggle, oauthPanelBody);\n\n// Load OAuth credentials status on startup (with retry until bridge is ready)\n(async function loadOAuthWithRetry() {\n  const maxRetries = 10;\n  const retryDelay = 1000;\n  \n  for (let i = 0; i < maxRetries; i++) {\n    try {\n      const response = await browserAPI.runtime.sendMessage({ type: 'oauth_get_credentials_status' }) as {\n        ok: boolean;\n        providers?: Record<string, { configured: boolean; client_id_preview?: string }>;\n      };\n      \n      if (response?.ok && response.providers) {\n        renderOAuthProviders(response.providers);\n        const configuredCount = Object.values(response.providers).filter(p => p.configured).length;\n        if (configuredCount > 0) {\n          oauthStatusIndicator.className = 'status-indicator connected';\n          oauthStatusText.className = 'status-text connected';\n          oauthStatusText.textContent = `${configuredCount} configured`;\n        } else {\n          oauthStatusIndicator.className = 'status-indicator disconnected';\n          oauthStatusText.className = 'status-text disconnected';\n          oauthStatusText.textContent = 'Not configured';\n        }\n        return; // Success, stop retrying\n      }\n    } catch {\n      // Will retry\n    }\n    \n    // Wait before retrying\n    await new Promise(resolve => setTimeout(resolve, retryDelay));\n  }\n  \n  // Max retries reached\n  console.warn('[Sidebar] Failed to load OAuth status after retries');\n})();\n\n// =============================================================================\n// Quick Actions Panel\n// =============================================================================\n\nconst quickActionsHeader = document.getElementById('quick-actions-header') as HTMLDivElement;\nconst quickActionsToggle = document.getElementById('quick-actions-toggle') as HTMLSpanElement;\nconst quickActionsBody = document.getElementById('quick-actions-body') as HTMLDivElement;\nconst openDirectoryBtn = document.getElementById('open-directory-btn') as HTMLButtonElement;\nconst openChatBtn = document.getElementById('open-chat-btn') as HTMLButtonElement;\nconst reloadExtensionBtn = document.getElementById('reload-extension-btn') as HTMLButtonElement;\n\n// Set up panel toggle\nsetupPanelToggle(quickActionsHeader, quickActionsToggle, quickActionsBody);\n\n// Open Directory button - opens the MCP server directory\nopenDirectoryBtn.addEventListener('click', async () => {\n  try {\n    const directoryUrl = browserAPI.runtime.getURL('dist/directory.html');\n    console.log('[Sidebar] Opening directory at:', directoryUrl);\n    await browserAPI.tabs.create({ url: directoryUrl });\n  } catch (err) {\n    console.error('[Sidebar] Failed to open directory:', err);\n    showToast('Failed to open directory');\n  }\n});\n\n// Open Chat button - opens the chat demo in a new tab\nopenChatBtn.addEventListener('click', async () => {\n  try {\n    // The demo is at the extension root level\n    const chatUrl = browserAPI.runtime.getURL('demo/chat-poc/index.html');\n    console.log('[Sidebar] Opening chat at:', chatUrl);\n    await browserAPI.tabs.create({ url: chatUrl });\n  } catch (err) {\n    console.error('[Sidebar] Failed to open chat:', err);\n    showToast('Failed to open chat');\n  }\n});\n\n// Reload Extension button\nreloadExtensionBtn.addEventListener('click', async () => {\n  try {\n    await browserAPI.runtime.reload();\n  } catch (err) {\n    console.error('[Sidebar] Failed to reload:', err);\n    showToast('Failed to reload extension');\n  }\n});\n\n// =============================================================================\n// Tool Tester Panel\n// =============================================================================\n\nconst toolTesterHeader = document.getElementById('tool-tester-header') as HTMLDivElement;\nconst toolTesterToggle = document.getElementById('tool-tester-toggle') as HTMLSpanElement;\nconst toolTesterBody = document.getElementById('tool-tester-body') as HTMLDivElement;\nconst toolTesterServerSelect = document.getElementById('tool-tester-server') as HTMLSelectElement;\nconst toolTesterToolSelect = document.getElementById('tool-tester-tool') as HTMLSelectElement;\nconst toolTesterSchemaDiv = document.getElementById('tool-tester-schema') as HTMLDivElement;\nconst toolTesterArgsInput = document.getElementById('tool-tester-args') as HTMLTextAreaElement;\nconst toolTesterHint = document.getElementById('tool-tester-hint') as HTMLDivElement;\nconst toolTesterRunBtn = document.getElementById('tool-tester-run') as HTMLButtonElement;\nconst toolTesterResultDiv = document.getElementById('tool-tester-result') as HTMLDivElement;\nconst toolTesterOutput = document.getElementById('tool-tester-output') as HTMLElement;\n\ntype ToolInfo = {\n  name: string;\n  description?: string;\n  inputSchema?: Record<string, unknown>;\n};\n\ntype ServerWithTools = {\n  id: string;\n  name: string;\n  running: boolean;\n  tools?: ToolInfo[];\n};\n\nlet cachedServersWithTools: ServerWithTools[] = [];\n\n// Setup panel toggle\nsetupPanelToggle(toolTesterHeader, toolTesterToggle, toolTesterBody);\n\n// Load servers into the dropdown when panel opens\nasync function loadToolTesterServers(): Promise<void> {\n  try {\n    const response = await browserAPI.runtime.sendMessage({ type: 'sidebar_get_servers' });\n    console.log('[Tool Tester] Got servers response:', response);\n    if (!response?.ok) return;\n    \n    cachedServersWithTools = response.servers as ServerWithTools[];\n    console.log('[Tool Tester] Servers:', cachedServersWithTools.map(s => ({ \n      id: s.id, \n      name: s.name, \n      running: s.running, \n      toolCount: s.tools?.length \n    })));\n    \n    // Populate server dropdown\n    toolTesterServerSelect.innerHTML = '<option value=\"\">Select a server...</option>';\n    for (const server of cachedServersWithTools) {\n      // Show all running servers, even if tools aren't populated yet\n      if (server.running) {\n        const option = document.createElement('option');\n        option.value = server.id;\n        const toolCount = server.tools?.length || 0;\n        option.textContent = `${server.name} (${toolCount} tools)`;\n        toolTesterServerSelect.appendChild(option);\n      }\n    }\n  } catch (err) {\n    console.error('[Sidebar] Failed to load servers for tool tester:', err);\n  }\n}\n\n// When server is selected, populate tools dropdown\ntoolTesterServerSelect.addEventListener('change', async () => {\n  const serverId = toolTesterServerSelect.value;\n  toolTesterToolSelect.innerHTML = '<option value=\"\">Loading tools...</option>';\n  toolTesterToolSelect.disabled = true;\n  toolTesterSchemaDiv.style.display = 'none';\n  toolTesterRunBtn.disabled = true;\n  toolTesterResultDiv.style.display = 'none';\n  \n  if (!serverId) {\n    toolTesterToolSelect.innerHTML = '<option value=\"\">Select a tool...</option>';\n    return;\n  }\n  \n  // Try to get tools from cached data first\n  let server = cachedServersWithTools.find(s => s.id === serverId);\n  let tools = server?.tools || [];\n  \n  // If no tools in cache, fetch them via tools/list\n  if (tools.length === 0) {\n    console.log('[Tool Tester] No cached tools, fetching via MCP...');\n    try {\n      const listResponse = await browserAPI.runtime.sendMessage({\n        type: 'mcp_call_method',\n        serverId,\n        method: 'tools/list',\n      });\n      console.log('[Tool Tester] tools/list response:', listResponse);\n      if (listResponse?.ok && listResponse.result?.tools) {\n        tools = listResponse.result.tools;\n        // Update cache\n        if (server) {\n          server.tools = tools;\n        }\n      }\n    } catch (err) {\n      console.error('[Tool Tester] Failed to fetch tools:', err);\n    }\n  }\n  \n  toolTesterToolSelect.innerHTML = '<option value=\"\">Select a tool...</option>';\n  \n  if (tools.length === 0) {\n    toolTesterToolSelect.innerHTML = '<option value=\"\">No tools available</option>';\n    return;\n  }\n  \n  toolTesterToolSelect.disabled = false;\n  for (const tool of tools) {\n    const option = document.createElement('option');\n    option.value = tool.name;\n    option.textContent = tool.name;\n    toolTesterToolSelect.appendChild(option);\n  }\n});\n\n// When tool is selected, show schema and enable run button\ntoolTesterToolSelect.addEventListener('change', () => {\n  const serverId = toolTesterServerSelect.value;\n  const toolName = toolTesterToolSelect.value;\n  \n  toolTesterSchemaDiv.style.display = 'none';\n  toolTesterRunBtn.disabled = true;\n  toolTesterResultDiv.style.display = 'none';\n  \n  if (!serverId || !toolName) return;\n  \n  const server = cachedServersWithTools.find(s => s.id === serverId);\n  const tool = server?.tools?.find(t => t.name === toolName);\n  \n  if (!tool) return;\n  \n  toolTesterSchemaDiv.style.display = 'block';\n  toolTesterRunBtn.disabled = false;\n  \n  // Show description and schema hint\n  let hint = tool.description || 'No description';\n  if (tool.inputSchema) {\n    const schema = tool.inputSchema as { required?: string[]; properties?: Record<string, { type?: string; description?: string }> };\n    const required = schema.required || [];\n    const props = schema.properties || {};\n    const propHints = Object.entries(props).map(([key, val]) => {\n      const req = required.includes(key) ? ' (required)' : '';\n      return `\u2022 ${key}: ${val.type || 'any'}${req}${val.description ? ' - ' + val.description : ''}`;\n    });\n    if (propHints.length > 0) {\n      hint += '\\n\\nParameters:\\n' + propHints.join('\\n');\n    }\n  }\n  toolTesterHint.textContent = hint;\n  toolTesterHint.style.whiteSpace = 'pre-wrap';\n  \n  // Pre-populate args with empty object or example\n  if (tool.inputSchema) {\n    const schema = tool.inputSchema as { properties?: Record<string, unknown> };\n    const props = schema.properties || {};\n    const example: Record<string, string> = {};\n    for (const key of Object.keys(props)) {\n      example[key] = '';\n    }\n    toolTesterArgsInput.value = JSON.stringify(example, null, 2);\n  } else {\n    toolTesterArgsInput.value = '{}';\n  }\n});\n\n// Run the tool\ntoolTesterRunBtn.addEventListener('click', async () => {\n  const serverId = toolTesterServerSelect.value;\n  const toolName = toolTesterToolSelect.value;\n  \n  if (!serverId || !toolName) return;\n  \n  let args: Record<string, unknown> = {};\n  try {\n    const argsText = toolTesterArgsInput.value.trim();\n    if (argsText) {\n      args = JSON.parse(argsText);\n    }\n  } catch (err) {\n    showToast('Invalid JSON in arguments', 'error');\n    return;\n  }\n  \n  toolTesterRunBtn.disabled = true;\n  toolTesterRunBtn.textContent = 'Running...';\n  toolTesterResultDiv.style.display = 'block';\n  toolTesterOutput.textContent = 'Executing...';\n  \n  try {\n    console.log(`[Tool Tester] Calling ${serverId}/${toolName} with:`, args);\n    const response = await browserAPI.runtime.sendMessage({\n      type: 'sidebar_call_tool',\n      serverId,\n      toolName,\n      args,\n    });\n    \n    console.log('[Tool Tester] Response:', response);\n    \n    if (response?.ok) {\n      toolTesterOutput.textContent = JSON.stringify(response.result, null, 2);\n    } else {\n      toolTesterOutput.textContent = `Error: ${response?.error || 'Unknown error'}`;\n    }\n  } catch (err) {\n    console.error('[Tool Tester] Error:', err);\n    toolTesterOutput.textContent = `Exception: ${err instanceof Error ? err.message : String(err)}`;\n  }\n  \n  toolTesterRunBtn.disabled = false;\n  toolTesterRunBtn.textContent = 'Run Tool';\n});\n\n// Load servers when the panel body becomes visible (on expand)\ntoolTesterHeader.addEventListener('click', () => {\n  // Small delay to let the toggle happen first\n  setTimeout(() => {\n    if (!toolTesterBody.classList.contains('collapsed')) {\n      loadToolTesterServers();\n    }\n  }, 50);\n});\n\n// =============================================================================\n// Agent Sessions Panel\n// =============================================================================\n\ntype SessionSummary = {\n  sessionId: string;\n  type: 'implicit' | 'explicit';\n  origin: string;\n  status: 'active' | 'suspended' | 'terminated';\n  name?: string;\n  createdAt: number;\n  lastActiveAt: number;\n  capabilities: {\n    hasLLM: boolean;\n    toolCount: number;\n    hasBrowserAccess: boolean;\n  };\n  usage: {\n    promptCount: number;\n    toolCallCount: number;\n  };\n};\n\nconst sessionsPanelHeader = document.getElementById('sessions-panel-header') as HTMLDivElement;\nconst sessionsPanelToggle = document.getElementById('sessions-panel-toggle') as HTMLSpanElement;\nconst sessionsList = document.getElementById('sessions-list') as HTMLDivElement;\nconst sessionsStatusIndicator = document.getElementById('sessions-status-indicator') as HTMLDivElement;\nconst sessionsCount = document.getElementById('sessions-count') as HTMLSpanElement;\nconst refreshSessionsBtn = document.getElementById('refresh-sessions-btn') as HTMLButtonElement;\n\nasync function loadSessions(): Promise<void> {\n  try {\n    const response = await browserAPI.runtime.sendMessage({ type: 'session.list' }) as {\n      ok: boolean;\n      sessions?: SessionSummary[];\n      error?: string;\n    };\n\n    if (response?.ok && response.sessions) {\n      renderSessions(response.sessions);\n      \n      // Update status indicator\n      const activeCount = response.sessions.filter(s => s.status === 'active').length;\n      if (activeCount > 0) {\n        sessionsStatusIndicator.className = 'status-indicator connected';\n        sessionsCount.className = 'status-text connected';\n        sessionsCount.textContent = String(activeCount);\n      } else {\n        sessionsStatusIndicator.className = 'status-indicator disconnected';\n        sessionsCount.className = 'status-text disconnected';\n        sessionsCount.textContent = '0';\n      }\n    } else {\n      sessionsList.innerHTML = '<div class=\"empty-state\">Failed to load sessions.</div>';\n    }\n  } catch (err) {\n    console.error('[Sidebar] Failed to load sessions:', err);\n    sessionsList.innerHTML = '<div class=\"empty-state\">Failed to load sessions.</div>';\n  }\n}\n\nfunction formatRelativeTime(timestamp: number): string {\n  const now = Date.now();\n  const diff = now - timestamp;\n  \n  if (diff < 60000) return 'just now';\n  if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;\n  if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;\n  return `${Math.floor(diff / 86400000)}d ago`;\n}\n\nfunction renderSessions(sessions: SessionSummary[]): void {\n  if (sessions.length === 0) {\n    sessionsList.innerHTML = '<div class=\"empty-state\">No active sessions.</div>';\n    return;\n  }\n\n  // Sort: active first, then by lastActiveAt descending\n  const sorted = [...sessions].sort((a, b) => {\n    if (a.status === 'active' && b.status !== 'active') return -1;\n    if (a.status !== 'active' && b.status === 'active') return 1;\n    return b.lastActiveAt - a.lastActiveAt;\n  });\n\n  sessionsList.innerHTML = sorted.map((session) => {\n    const typeClass = session.type === 'explicit' ? 'explicit' : 'implicit';\n    const statusClass = session.status === 'terminated' ? 'terminated' : '';\n    const displayName = session.name || (session.type === 'implicit' ? 'Anonymous Session' : 'Agent Session');\n    \n    // Build capability badges\n    const capBadges: string[] = [];\n    if (session.capabilities.hasLLM) {\n      capBadges.push('<span class=\"session-cap-badge llm\">LLM</span>');\n    }\n    if (session.capabilities.toolCount > 0) {\n      capBadges.push(`<span class=\"session-cap-badge tools\">${session.capabilities.toolCount} Tools</span>`);\n    }\n    if (session.capabilities.hasBrowserAccess) {\n      capBadges.push('<span class=\"session-cap-badge browser\">Browser</span>');\n    }\n    \n    // Truncate origin for display\n    const originDisplay = session.origin.length > 40 \n      ? session.origin.slice(0, 37) + '...' \n      : session.origin;\n\n    return `\n      <div class=\"session-item ${typeClass} ${statusClass}\" data-session-id=\"${session.sessionId}\">\n        <div class=\"session-header\">\n          <div class=\"session-name\">\n            ${escapeHtml(displayName)}\n            <span class=\"session-type-badge ${typeClass}\">${session.type}</span>\n          </div>\n          <span class=\"session-time\">${formatRelativeTime(session.lastActiveAt)}</span>\n        </div>\n        <div class=\"session-origin\" title=\"${escapeHtml(session.origin)}\">${escapeHtml(originDisplay)}</div>\n        <div class=\"session-capabilities\">\n          ${capBadges.length > 0 ? capBadges.join('') : '<span style=\"color: var(--color-text-muted); font-size: 10px;\">No capabilities</span>'}\n        </div>\n        <div class=\"session-stats\">\n          <span class=\"session-stat\">\uD83D\uDCAC ${session.usage.promptCount} prompts</span>\n          <span class=\"session-stat\">\u26A1 ${session.usage.toolCallCount} tool calls</span>\n        </div>\n        ${session.status === 'active' ? `\n          <div class=\"session-actions\">\n            <button class=\"btn btn-sm btn-danger terminate-session-btn\" data-session-id=\"${session.sessionId}\" data-origin=\"${escapeHtml(session.origin)}\">Terminate</button>\n          </div>\n        ` : `\n          <div class=\"session-actions\">\n            <span style=\"font-size: var(--text-xs); color: var(--color-text-muted);\">Session ${session.status}</span>\n          </div>\n        `}\n      </div>\n    `;\n  }).join('');\n\n  // Add event listeners for terminate buttons\n  sessionsList.querySelectorAll('.terminate-session-btn').forEach((btn) => {\n    btn.addEventListener('click', async () => {\n      const sessionId = (btn as HTMLElement).dataset.sessionId!;\n      const origin = (btn as HTMLElement).dataset.origin!;\n      \n      (btn as HTMLButtonElement).disabled = true;\n      (btn as HTMLButtonElement).textContent = '...';\n      \n      try {\n        await browserAPI.runtime.sendMessage({\n          type: 'session.terminate',\n          sessionId,\n          origin,\n        });\n        await loadSessions();\n        showToast('Session terminated');\n      } catch (err) {\n        console.error('[Sidebar] Failed to terminate session:', err);\n        showToast('Failed to terminate session', 'error');\n      }\n    });\n  });\n}\n\n// Setup sessions panel toggle\nsetupPanelToggle(sessionsPanelHeader, sessionsPanelToggle, sessionsList);\n\n// Refresh sessions button\nrefreshSessionsBtn?.addEventListener('click', async (e) => {\n  e.stopPropagation();\n  refreshSessionsBtn.disabled = true;\n  await loadSessions();\n  refreshSessionsBtn.disabled = false;\n});\n\n// Listen for session changes from background\nbrowserAPI.runtime.onMessage.addListener((message) => {\n  if (message?.type === 'session_created' || \n      message?.type === 'session_terminated' || \n      message?.type === 'session_updated') {\n    loadSessions();\n  }\n  return false;\n});\n\n// Load sessions on startup\nloadSessions();\n\n// Auto-refresh sessions every 30 seconds\nsetInterval(loadSessions, 30000);\n\n"],
  "mappings": "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",
  "names": []
}
